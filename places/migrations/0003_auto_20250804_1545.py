# Generated by Django 5.2.4 on 2025-08-04 12:45

from django.db import migrations
import json


def load_places(apps, schema_editor):
    Place = apps.get_model('places', 'Place')
    
    with open('static/places/moscow_legends.json', 'r', encoding='utf-8') as f:
        data = json.load(f)
    
    Place.objects.create(
        title=data['title'],
        description_short=data['description_short'],
        description_long=data['description_long'],
        longitude=float(data['coordinates']['lng']),
        latitude=float(data['coordinates']['lat']),
    )


def reverse_func(apps, schema_editor):
    Place = apps.get_model('places', 'Place')
    Place.objects.all().delete()


class Migration(migrations.Migration):

    dependencies = [
        ("places", "0002_auto_20250804_1538"),
    ]

    operations = [
        migrations.RunPython(load_places, reverse_func),
    ]
